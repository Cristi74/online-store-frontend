<div class="register">
  <img src="../../../assets/estore.jpg" alt="" routerLink="/" />
  <form [formGroup]='form' (ngSubmit)="submit()">
    <h1>Register</h1>
    <hr />
    <div *ngIf="option === 1">
      <label for="title">Gender</label>
      <select name="title" formControlName="sex">
        <option>F</option>
        <option>M</option>
        <option>Other</option></select
      ><br />
      <label for="firstName">First Name</label><br />
      <div class='inputs'>
        <input
          type="text"
          formControlName="firstName"
        />
      </div>
      <br />
      <label for="lastName">Last Name</label><br />
      <div class="inputs">
        <input
          type="text"
          formControlName="lastName"
        />
      </div>
      <br />
      <label for="email">E-mail</label><br />
      <div class="inputs"><input type="text" formControlName="email" /></div><br />
      <div *ngIf="!f.email.valid! && !f.email.pristine" class='red'>
        Email doesn't look right.
      </div>
      <button class="register-button next" (click)="optionIncrease()">
        Next
      </button>
    </div>
    <div *ngIf="option === 2">
      <label for="username">Username</label><br />
      <div class="inputs">
        <input
          type="text"
          formControlName="username"
        />
      </div>
      <br />
      <label for="password">Password</label><br />
      <div class="inputs">
        <input
          [type]="hide1 ? 'password' : 'text'"
          formControlName="password"
        />
        <mat-icon (click)="hide1 = !hide1">{{
          hide1 ? "visibility_off" : "visibility"
        }}</mat-icon>
      </div>
      <div *ngIf="f.password.errors && f.password.errors.pattern" class='red'>Password must: 
        <ul>
        <li> contain one uppercase letter</li>
        <li> contain one number</li>
        <li> contain one special character</li>  
        <li> be at lest 8 characters long.</li>
        </ul>
      </div>
      <br />
      <label for="repeat-password">Repeat Password</label><br />
      <div class="inputs">
        <input 
          [type]="hide2 ? 'password' : 'text'" 
          formControlName="passwordRetype"
          />
        <mat-icon (click)="hide2 = !hide2">{{
          hide2 ? "visibility_off" : "visibility"
        }}</mat-icon>
      </div>
      <div *ngIf="f.passwordRetype.value!==f.password.value && !f.passwordRetype.pristine" class='red'>
        Passwords do not match
      </div>
      <br />
      <button class="register-button" (click)="optionIncrease()">Next</button>
     <br />
      <hr />
      <button class="register-button first-btn" (click)="optionDecrease()">
        Previous</button
      >
    </div>
    <div *ngIf="option === 3">
      <h2 *ngIf="success == 1">User Successfuly Created</h2>
      <h2 *ngIf="success == 2">There was and error please try again</h2>
      <label for="phone">Phone Number</label><br />
      <div class="inputs">
      <input
        type="text"
        formControlName="telephone"
      /></div><br />
      <label for="address">Address</label><br />
      <div class="inputs">
        <input 
          type="text"
          formControlName="address"
        />
      </div>
      <br />
      <label for="county">County</label><br />
      <div class="inputs">
        <input
          type="text"
          formControlName="county"
        />
      </div>
      <br />
      <label for="city">City</label><br />
      <div class="inputs">
        <input
          type="text"
          formControlName="city"
        />
      </div>
      <br />
      <label for="postal-code">Postal Code</label>
      <div class="inputs">
        <input
          type="text"
          formControlName="postalCode"
        />
      </div>
      <br />
      <button class="register-button first-btn" (click)="optionDecrease()">
        Previous</button
      ><br />
      <hr />
      <button
        [ngClass]="
          !form.valid ? 'register-user-disabled' : 'register-button'
        "
        type="submit"
        [disabled]="!form.valid"
      >
        Register
      </button>
    </div>
  </form>
  <div class="confirm" *ngIf="success == 1">
    <mat-icon>check_circle_outline</mat-icon>
    <h3>User created successfuly</h3>
    <h2>Chech your inbox for confirmation mail</h2>
  </div>
  <div class="confirm" *ngIf="success == 2" [style.visibility]="dialogVisibility ? 'visible' : 'hidden'">
    <mat-icon>check_circle_outline</mat-icon>
    <h3>{{message}}</h3>
    <h2>Please try again with a different username</h2>
  </div>
</div>
